(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,n){e.exports={FormStyle1:"AdminPage_FormStyle1__2WyUk",FormColumn:"AdminPage_FormColumn__19Rng",Description:"AdminPage_Description__2DDwy"}},27:function(e,t,n){e.exports={Body:"App_Body__3GDxS",SiteNavBar:"App_SiteNavBar__9cl4Z",UserBar:"App_UserBar__2U6zT",SiteContent:"App_SiteContent__2jrpx"}},38:function(e,t,n){e.exports={MainPage:"MainPage_MainPage__2phI6",CountryCardPhoto:"MainPage_CountryCardPhoto__2cHsY",CountryCard:"MainPage_CountryCard__2Hry-"}},44:function(e,t,n){e.exports={AuthPage:"AuthPage_AuthPage__n7mVp",AuthForm:"AuthPage_AuthForm__1K-Gr",FormMessage:"AuthPage_FormMessage__2Xi3-",AuthInput:"AuthPage_AuthInput__1wvqm",AuthButtonSet:"AuthPage_AuthButtonSet__2JCha",FormButton:"AuthPage_FormButton__2DDF3",SignUpButton:"AuthPage_SignUpButton__3m-xC",SignInButton:"AuthPage_SignInButton__3QLpV"}},55:function(e,t,n){e.exports={InputBlock:"Input_InputBlock__1WiFD"}},67:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),o=n.n(c),s=(n(67),n(5)),l=n(21),i=n(6),u=n(27),d=n.n(u),j=n(59),b=n(11),h=n.n(b),g=n(19),O=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(s.a)(c,2),l=o[0],i=o[1];return{loading:n,error:l,request:Object(a.useCallback)(function(){var e=Object(g.a)(h.a.mark((function e(t){var n,a,c,o,s,l=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,c=l.length>3&&void 0!==l[3]?l[3]:{},r(!0),e.prev=4,a&&(a=JSON.stringify(a),c["Content-Type"]="application/json"),e.next=8,fetch("https://travel-app-server24.herokuapp.com"+t,{method:n,body:a,headers:c});case 8:return o=e.sent,e.next=11,o.json();case 11:if(s=e.sent,o.ok){e.next=14;break}throw new Error(s.message||"Smth wrong");case 14:return r(!1),e.abrupt("return",s);case 18:e.prev=18,e.t0=e.catch(4),r(!1),i(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),clearError:function(){return i(null)}}},p=function(){var e=O(),t=e.loading,n=e.error,r=e.request,c=Object(a.useState)(),o=Object(s.a)(c,2),l=o[0],i=o[1],u=Object(a.useCallback)(Object(g.a)(h.a.mark((function e(){var t,n,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,r("/api/country/get","POST",t);case 3:n=e.sent,i(n);case 5:case"end":return e.stop()}}),e)}))),[r]);return{cLoading:t,cError:n,countryResponse:l,getCountryFromBase:Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=u(e);return t}),[u])}},v=n(38),m=n.n(v),x=n(1),f=function(e){var t,n=p(),r=n.getCountryFromBase,c=n.countryResponse;Object(a.useEffect)((function(){r({key:"short"})}),[]),c&&(t=c.countries.map((function(e){return e.langData[1]})));return Object(x.jsx)("div",{className:m.a.MainPage,children:t&&function(t){var n=t;return e.searchbarState&&(n=t.filter((function(t){return t.countryName.includes(e.searchbarState)}))),n.map((function(e,t){return Object(x.jsx)("div",{children:Object(x.jsxs)(l.b,{className:m.a.CountryCard,to:"/country/".concat(e.countryName.toLowerCase()),children:[Object(x.jsx)("div",{children:Object(x.jsx)("img",{className:m.a.CountryCardPhoto,src:"https://upload.wikimedia.org/wikipedia/commons/b/ba/Flag_of_Germany.svg",alt:"flag"})}),Object(x.jsxs)("div",{children:[e.countryName,", ",e.capitalName]})]})},"countryCard".concat(t))}))}(Object(j.a)(t))})},C=function(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Country Page"}),Object(x.jsx)("button",{children:"Back"})]})},y=n(4),S=Object(a.createContext)({token:null,userId:null,login:function(){},logout:function(){},isAuthenticated:!1}),_=n(44),N=n.n(_),k=n(22),F=function(e){var t=e.onClick,n=e.label,a=e.disabled,r=e.className;return Object(x.jsx)("button",{onClick:t,disabled:a,className:r,children:n})},P=n(55),w=n.n(P),D=function(e){var t=e.name,n=e.type,a=e.onChange,r=e.label,c=e.placeholder,o=e.className,s=e.value,l=[w.a.InputBlock,o];return Object(x.jsxs)("div",{className:l.join(" "),children:[Object(x.jsx)("label",{htmlFor:"inputId".concat(t),children:r}),Object(x.jsx)("input",{name:t,id:"inputId".concat(t),type:n,value:s,onChange:a,placeholder:c})]})},A=function(e){var t=e.classes,n=e.message,r=e.loginHandler,c=e.signUpHandler,o=e.waitCondition,l=Object(a.useState)({email:"",password:""}),i=Object(s.a)(l,2),u=i[0],d=i[1],j=function(e){d(Object(y.a)(Object(y.a)({},u),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(x.jsxs)("div",{className:t.AuthForm,children:[Object(x.jsx)("div",{className:t.FormMessage,children:n}),Object(x.jsx)(D,{label:"Login: ",name:"email",type:"text",onChange:j,className:t.AuthInput}),Object(x.jsx)(D,{className:t.AuthInput,name:"password",type:"password",label:"Password: ",onChange:j}),Object(x.jsxs)("div",{className:t.AuthButtonSet,children:[Object(x.jsx)(F,{onClick:function(){return r(u)},disabled:o,label:"Sign In",className:[t.SignInButton,t.FormButton].join(" ")}),Object(x.jsx)(F,{onClick:function(){return c(u)},disabled:o,label:"Sign Up",className:[t.SignUpButton,t.FormButton].join(" ")})]})]})},B=function(){var e=O(),t=e.loading,n=e.error,r=e.request,c=Object(a.useState)(""),o=Object(s.a)(c,2),l=o[0],i=o[1],u=Object(a.useContext)(S),d=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("/api/auth/register","POST",Object(y.a)({},t));case 3:n=e.sent,i(n.message||""),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("/api/auth/login","POST",Object(y.a)({},t));case 3:n=e.sent,u.login(n.token,n.userId),i(n.message||""),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){i(n)}),[n]),Object(x.jsx)("div",{className:N.a.AuthPage,children:Object(x.jsx)(A,{classes:N.a,message:l,loginHandler:j,signUpHandler:d,waitCondition:t})})},I="authData",E=function(e){var t=e.classes,n=e.children;return Object(x.jsx)("div",{className:t,children:n})},T=function(e){var t=e.classes;return Object(x.jsx)("div",{className:t,children:Object(x.jsx)(S.Consumer,{children:function(e){return e.isAuthenticated?Object(x.jsxs)("div",{children:["You are in the system!",Object(x.jsx)("button",{onClick:e.logout,children:"Log out"})]}):Object(x.jsx)(l.b,{to:"/login",children:"Sign in"})}})})},U=n(60);var R=function(e){var t=e.children,n=e.index,a=e.value,r=(e.label,e.className),c=Object(U.a)(e,["children","index","value","label","className"]);return Object(x.jsx)("div",Object(y.a)(Object(y.a)({style:{display:a===n?"flex":"none"},role:"tabpanel",className:["gogo",r].join(" "),hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},c),{},{children:a===n&&t}))},H=n(112),L=n(114),M=n(115);var J=Object(H.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)}}})),q=function(e){var t=e.children,n=J(),c=Object(a.useState)(0),o=Object(s.a)(c,2),l=o[0],i=o[1],u=null,d=null;return t&&(u=t.map((function(e,t){return console.log(e),Object(x.jsx)(L.a,Object(y.a)({label:e.props.label},function(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}(t)),t)})),d=t.map((function(e,t){return r.a.cloneElement(e,{value:l,key:t,index:t})}))),Object(x.jsxs)("div",{className:n.root,children:[Object(x.jsx)(M.a,{orientation:"vertical",variant:"scrollable",value:l,onChange:function(e,t){i(t)},"aria-label":"Vertical tabs example",className:n.tabs,children:u}),d]})},G={countryCode:""},W=function(e){var t=e.sendHandler,n=e.waitCondition,r=e.message,c=Object(a.useState)(G),o=Object(s.a)(c,2),l=o[0],i=o[1];return Object(x.jsxs)("div",{children:[Object(x.jsx)(D,{label:"Country code:",onChange:function(e){i(Object(y.a)(Object(y.a)({},l),{},Object(k.a)({},e.target.name,e.target.value)))},name:"countryCode"}),Object(x.jsx)(F,{onClick:function(){return t(l)},disabled:n,label:"Add"}),Object(x.jsx)("br",{}),r]})},K=n(20),V=n.n(K),Y=function(e){var t=e.name,n=e.onChange,a=e.label,r=e.placeholder,c=e.className,o=e.value,s=e.rows;return Object(x.jsxs)("div",{className:c,children:[Object(x.jsx)("label",{htmlFor:"textareaId".concat(t),children:a}),Object(x.jsx)("br",{}),Object(x.jsx)("textarea",{name:t,id:"textareaId".concat(t),value:o,rows:s,onChange:n,placeholder:r})]})},z={EN:"English",RU:"Russian",FR:"France"},Q=function(e){var t,n,r,c,o,l,i,u,d=e.sendHandler,j=e.waitCondition,b=e.countriesData,h=e.message,g=Object(a.useState)({countryCode:b?Object.keys(b)[0]:"",lang:Object.keys(z)[0]}),O=Object(s.a)(g,2),p=O[0],v=O[1],m=Object(a.useState)(b),f=Object(s.a)(m,2),C=f[0],S=f[1],_=function(e){v(Object(y.a)(Object(y.a)({},p),{},Object(k.a)({},e.target.name,e.target.value)))},N=function(e){if(C){var t=Object(y.a)({},C);t[p.countryCode].langData[p.lang][e.target.name]=e.target.value,S(t)}},P=[];if(b)for(var w in b)b.hasOwnProperty(w)&&P.push(w);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:V.a.FormColumn,children:[Object(x.jsx)("label",{children:"Country"}),Object(x.jsx)("select",{name:"countryCode",id:"counties",value:p.countryCode,onChange:_,children:P[0]?P.map((function(e){return Object(x.jsx)("option",{value:e,children:e},e)})):null}),Object(x.jsx)("label",{children:"Language"}),Object(x.jsxs)("select",{name:"lang",onChange:_,value:p.lang,children:[Object(x.jsx)("option",{value:"EN",children:"English"}),Object(x.jsx)("option",{value:"RU",children:"Russian"}),Object(x.jsx)("option",{value:"FR",children:"French"})]}),Object(x.jsx)(D,{label:"Country Name: ",name:"countryName",value:C&&(null===(t=C[p.countryCode])||void 0===t||null===(n=t.langData[p.lang])||void 0===n?void 0:n.countryName)||"",onChange:N}),Object(x.jsx)(D,{label:"Capital Name: ",name:"capitalName",value:C&&(null===(r=C[p.countryCode])||void 0===r||null===(c=r.langData[p.lang])||void 0===c?void 0:c.capitalName)||"",onChange:N}),Object(x.jsx)(F,{onClick:function(){return d({countryCode:p.countryCode,data:C[p.countryCode]})},disabled:j,label:"Update",className:[V.a.SignUpButton,V.a.FormButton].join(" ")}),Object(x.jsx)("br",{}),h]}),Object(x.jsxs)("div",{className:V.a.FormColumn,children:[Object(x.jsx)(Y,{label:"Short text(in Mane Page: ",name:"shortText",value:C&&(null===(o=C[p.countryCode])||void 0===o||null===(l=o.langData[p.lang])||void 0===l?void 0:l.shortText)||"",onChange:N}),Object(x.jsx)(Y,{className:V.a.Description,label:"Description: ",name:"description",value:C&&(null===(i=C[p.countryCode])||void 0===i||null===(u=i.langData[p.lang])||void 0===u?void 0:u.description)||"",onChange:N,rows:11})]})]})},X=(n(28),{lang:"",countryName:"",shortText:"",capitalName:""}),Z={lang:"",countryCode:"",countryName:"",description:"",capitalName:""},$=function(){var e=O(),t=e.request,n=e.loading,r=p(),c=r.getCountryFromBase,o=r.countryResponse,l=r.cLoading,i=Object(a.useState)(""),u=Object(s.a)(i,2),d=u[0],j=u[1],b=Object(a.useState)(null),v=Object(s.a)(b,2),m=v[0],f=v[1],C=function(){var e=Object(g.a)(h.a.mark((function e(n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("/api/country/add","POST",Object(y.a)({},n));case 3:a=e.sent,j(a.message||""),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(g.a)(h.a.mark((function e(n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("/api/country/update","POST",_(n));case 3:a=e.sent,j(a.message||""),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),_=function(e){var t=Object(y.a)(Object(y.a)({},e.data),{},{langData:[]}),n=[];for(var a in e.data.langData)if(e.data.langData.hasOwnProperty(a)){var r={lang:a},c={lang:a,countryCode:e.countryCode};for(var o in X)void 0!==e.data.langData[a][o]&&(r[o]=e.data.langData[a][o]);for(var s in Z)void 0!==e.data.langData[a][s]&&(c[s]=e.data.langData[a][s]);t.langData.push(r),n.push(c)}return{countryData:t,langCountryData:n}};return Object(a.useEffect)((function(){c({})}),[]),Object(a.useEffect)((function(){o&&f(function(e){for(var t={},n=function(n){var a=e.countries[n].countryCode;t[a]=e.countries[n];for(var r={},c=0;c<t[a].langData.length;c++)r[t[a].langData[c].lang]=t[a].langData[c];if(e.langCountries)for(var o=e.langCountries.filter((function(e){return e.countryCode===a})),s=0;s<o.length;s++)r[o[s].lang]=Object(y.a)(Object(y.a)({},r[o[s].lang]),o[s]),delete r[o[s].lang].lang,delete r[o[s].lang].countryCode;t[a].langData=r},a=0;a<e.countries.length;a++)n(a);return t}(o))}),[o]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(q,{children:[Object(x.jsx)(R,{className:V.a.FormStyle1,label:"Add Country",children:Object(x.jsx)(W,{waitCondition:n,sendHandler:C,message:d})}),Object(x.jsx)(R,{className:V.a.FormStyle1,label:"Add Lang",children:o?Object(x.jsx)(Q,{waitCondition:n,sendHandler:S,countriesData:m,message:d}):l?Object(x.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):Object(x.jsx)("div",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0431\u0430\u0437\u044b \u0441\u0442\u0440\u0430\u043d"})})]})})},ee=function(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{onChange:function(t){e.setSearchbarState(t.target.value)},value:e.searchbarState,placeholder:"Search country"}),Object(x.jsx)("button",{onClick:function(){e.setSearchbarState("")},children:"x"})]})};var te=function(){var e=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(s.a)(c,2),l=o[0],i=o[1],u=Object(a.useCallback)((function(e,t){r(e),i(t),localStorage.setItem(I,JSON.stringify({userId:t,token:e}))}),[]),d=Object(a.useCallback)((function(){r(null),i(null),localStorage.removeItem(I)}),[]);return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem(I));(null===e||void 0===e?void 0:e.token)&&u(e.token,e.userId)}),[u]),{login:u,logout:d,token:n,userId:l}}(),t=e.token,n=e.login,r=e.logout,c=e.userId,o=!!t,u=Object(a.useState)(),j=Object(s.a)(u,2),b=j[0],h=j[1];return Object(x.jsx)(S.Provider,{value:{token:t,login:n,logout:r,userId:c,isAuthenticated:o},children:Object(x.jsxs)("div",{className:d.a.Body,children:[Object(x.jsxs)(E,{classes:d.a.SiteNavBar,children:[Object(x.jsx)(l.b,{to:"/",children:"Main"}),Object(x.jsx)(ee,{searchbarState:b,setSearchbarState:h}),Object(x.jsx)(T,{classes:d.a.UserBar})]}),Object(x.jsx)("div",{className:d.a.SiteContent,children:Object(x.jsxs)(i.c,{children:[Object(x.jsx)(i.a,{path:"/country/:countryName",exact:!0,children:Object(x.jsx)(C,{})}),Object(x.jsx)(i.a,{path:"/admin",exact:!0,children:Object(x.jsx)($,{})}),Object(x.jsx)(i.a,{path:"/",exact:!0,render:function(){return Object(x.jsx)(f,{searchbarState:b})}}),o?null:Object(x.jsx)(i.a,{path:"/login",exact:!0,children:Object(x.jsx)(B,{})})]})}),Object(x.jsx)("div",{className:d.a.SiteFooter})]})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,117)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},ae=Object(x.jsx)(l.a,{basename:"/",children:Object(x.jsx)(te,{})});console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/travel-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})),o.a.render(Object(x.jsx)(r.a.StrictMode,{children:ae}),document.getElementById("root")),ne()}},[[92,1,2]]]);
//# sourceMappingURL=main.0326d997.chunk.js.map